<?xml version="1.0" encoding="windows-1251" ?>

<!DOCTYPE page [
<!ENTITY nbsp "&#160;">
<!ENTITY пробел "&#160;">
<!ENTITY shy "&#173;">
<!ENTITY перенос "&#173;">
]>

<?xml:stylesheet type="text/xsl" href="../common/layout.xsl" ?>

<Урок xmlns="x-schema:Schema.xml" название="Загрузка изображений в базу данных" 
предыдущий="section01.xml" следующий="section03.xml" copyright="© 2001 Андрей Тендюк, Алексей Туманов, Григорий Ящук.">

<h1 style="color:maroon">Загрузка изображений в базу данных</h1> 
<p>При загрузке изображений в базу данных необходимо помнить, что изображения в базе хранятся в поле семейства <b>BLOB</b>:</p>
<pre>
TINYBLOB - 255 байт
BLOB - 65536 байт
MEDIUMBLOB - 16777215 байт
LONGBLOB - 424967295 байт
</pre>
<p>Чтобы добавить изображение, необходимо написать что-то вроде следующего:</p>
<pre>
$f = fopen("robot.jpg", "rb");
if(!$f){
	echo "Ошибка при открытии файла";
	exit();
}
$u = fread( $f, filesize("robot.jpg"));
fclose($f);

$r = mysql_connect();
mysql_select_db("datab", $r);

$query = "insert into tablefirst (picture) values ('$u')";
mysql_query($query);
mysql_close();
</pre>

</Урок>