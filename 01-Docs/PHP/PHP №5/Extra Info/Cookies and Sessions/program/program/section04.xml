<?xml version="1.0" encoding="windows-1251" ?>

<!DOCTYPE page [
<!ENTITY nbsp "&#160;">
<!ENTITY пробел "&#160;">
<!ENTITY shy "&#173;">
<!ENTITY перенос "&#173;">
]>

<?xml:stylesheet type="text/xsl" href="../common/layout.xsl" ?>

<Урок xmlns="x-schema:Schema.xml" название="Загрузка клиентом файлов на сервер" 
предыдущий="index.xml" следующий="section02.xml" copyright="© 2001 Андрей Тендюк, Алексей Туманов, Григорий Ящук.">

<h1 style="color:maroon">Загрузка клиентом файлов на сервер</h1>
<p>В языке PHP реализована возможность загрузки файлов на сервер. Клиент может загрузить на сервер любой файл. Для того, чтобы файлы можно было отправлять из браузера, необходимо создать элемент управления &lt;INPUT&gt; типа <b>FILE</b>. Кроме этого, для загрузки файлов необходимо установить атрибут формы <b>ENCTYPE</b> равным <b>"multipart/form-data"</b> и как всегда атрибут <b>ACTION</b> равным PHP-сценарию, которая будет у Вас обрабатывать загрузку файла. В результате должно выйти что-то вроде этого:</p>
<pre>
&lt;FORM ACTION="<i>имя_php_сценария</i>" METHOD="post" ENCTYPE="multipart/form-data"&gt;
 	Введите имя файла: &lt;INPUT TYPE="file" NAME="userfile"&gt;&lt;BR&gt;
 	&lt;INPUT TYPE="submit"&gt;&lt;BR&gt;
 &lt;/FORM&gt;
</pre>
<p>В результате, при нажатии на кнопку SUBMIT файл автоматически будет загружен на сервер. На сервере он может быть размещен в директории TEMP или в директории, где находится  РНР-интерпретатор. Автоматически файлу присваивается имя <i>phpX</i>, где Х - значение по порядку.</p>
<p>Если файл в дальнейшем не скопировать в другую директорию, то файл будет автоматически уничтожен при выходе из выполняемого РНР-сценария.</p>
<p>Но это еще не все, что можно сделать. А именно, можно наложить ограничения на загрузку файлов на сервер при помощи элемента управления <b>INPUT</b> с атрибутом <b>NAME</b> равным <b>MAX_FILE_SIZE</b> и <b>VALUE</b>, равному верхней границе для загружаемого файла, но с числом не превышающим размер, определенный в файле <i>php.ini</i> как upload_max_filesize (по умолчанию 2Мб).</p>
<p>При этом, помимо переменной, отвечающий за файл, в РНР-сценарии появляются еще три переменные:</p>
<table><tr>
	<td>$userfile_name</td>
	<td>путь и имя файла на стороне клиента</td>
</tr><tr>
	<td>$userfile_size</td>
	<td>размер файла в байтах</td>
</tr><tr>
	<td>$userfile_type</td>
	<td>тип файла</td>
</tr></table>


</Урок>